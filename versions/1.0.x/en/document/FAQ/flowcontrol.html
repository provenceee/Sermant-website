<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Flow Control FAQs | Sermant</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/versions/1.0.x/img/logo.svg">
    <meta name="description" content="A Proxyless Service Mesh Solution Based on Java Agent">
    
    <link rel="preload" href="/versions/1.0.x/assets/css/0.styles.c537b16d.css" as="style"><link rel="preload" href="/versions/1.0.x/assets/js/app.d89a10e1.js" as="script"><link rel="preload" href="/versions/1.0.x/assets/js/3.edc8aac8.js" as="script"><link rel="preload" href="/versions/1.0.x/assets/js/1.9e8b067b.js" as="script"><link rel="preload" href="/versions/1.0.x/assets/js/20.70491544.js" as="script"><link rel="prefetch" href="/versions/1.0.x/assets/js/10.ca8549df.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/11.6a8571e0.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/12.3caa9ab5.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/13.8dd7f824.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/14.7039f4a7.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/15.36703cc8.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/16.804e91c8.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/17.0f65b007.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/18.ea5d18ad.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/19.774fc8b7.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/21.b2da79fd.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/22.83502ed9.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/23.f67f4b5e.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/24.cc3c1a18.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/25.d32c83c5.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/26.d67ce16b.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/27.8e5c7da7.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/28.67800f2b.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/29.aab1d552.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/30.dc0b651c.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/31.0f26ce1c.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/32.b193a071.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/33.676efed7.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/34.e0a9cdb6.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/35.73e3b352.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/36.0bfd9ff5.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/37.02f826b4.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/38.889dab2d.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/39.4757bdce.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/4.62d43fe0.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/40.33c269ae.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/41.a4658db6.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/42.cd0091cf.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/43.959c86e2.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/44.8e23d298.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/45.d470fe53.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/46.4fc8612e.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/47.cf086521.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/48.55e1f70a.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/49.6fab56b0.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/5.dc19b0c4.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/50.512af98b.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/51.835dee91.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/52.ba3c177b.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/53.e66e62db.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/54.c33d3776.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/55.41b3f22f.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/56.c3909227.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/57.f4358dda.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/58.04baa10b.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/59.e6514139.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/6.776f7850.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/60.5410266f.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/61.59e38702.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/62.96273134.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/63.807a4412.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/64.fd39dc04.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/65.5a7e729d.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/66.64eda404.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/67.42b5b39d.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/68.dab77e43.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/69.59b843c2.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/7.95b69a9a.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/70.ea2db599.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/71.d1508896.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/72.f2045f8a.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/73.b644410d.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/74.7626c55a.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/75.7fb65875.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/76.899c626b.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/77.90d41e21.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/78.edaa0b7b.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/79.e9e1e72a.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/8.5d42cc53.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/80.b2cde3fe.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/81.90984771.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/82.ea554216.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/83.0e507f62.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/84.838a7d6e.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/85.fc05d3c1.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/86.74540eea.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/87.1797610e.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/88.3f5b69a9.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/89.73f38fbd.js"><link rel="prefetch" href="/versions/1.0.x/assets/js/9.623da9fe.js">
    <link rel="stylesheet" href="/versions/1.0.x/assets/css/0.styles.c537b16d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/versions/1.0.x/en/" class="home-link router-link-active"><img src="/versions/1.0.x/img/sermant-logo.png" alt="Sermant" class="logo"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/versions/1.0.x/en/document/" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/versions/1.0.x/en/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="https://github.com/huaweicloud/Sermant" target="_blank" class="nav-link external">
  Github
  <!----></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/versions/1.0.x/zh/document/FAQ/flowcontrol.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/versions/1.0.x/en/document/FAQ/flowcontrol.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <div class="nav-item"><!----></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/versions/1.0.x/en/document/" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/versions/1.0.x/en/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="https://github.com/huaweicloud/Sermant" target="_blank" class="nav-link external">
  Github
  <!----></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/versions/1.0.x/zh/document/FAQ/flowcontrol.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/versions/1.0.x/en/document/FAQ/flowcontrol.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <div class="nav-item"><!----></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Start</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>User Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Plugin Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Developer Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Community Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>FAQ</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/versions/1.0.x/en/document/FAQ/" aria-current="page" class="sidebar-link">FAQ</a></li><li><a href="/versions/1.0.x/en/document/FAQ/framework.html" class="sidebar-link">Sermant Framework FAQs</a></li><li><a href="/versions/1.0.x/en/document/FAQ/registry.html" class="sidebar-link">Service Registration FAQs</a></li><li><a href="/versions/1.0.x/en/document/FAQ/flowcontrol.html" aria-current="page" class="active sidebar-link">Flow Control FAQs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/versions/1.0.x/en/document/FAQ/flowcontrol.html#how-is-the-apipath-defined-in-the-service-scenario" class="sidebar-link">How Is The APIPath Defined In The Service Scenario?</a></li><li class="sidebar-sub-header"><a href="/versions/1.0.x/en/document/FAQ/flowcontrol.html#how-do-i-determine-whether-a-configuration-rule-takes-effect" class="sidebar-link">How Do I Determine Whether a Configuration Rule Takes Effect?</a></li><li class="sidebar-sub-header"><a href="/versions/1.0.x/en/document/FAQ/flowcontrol.html#possible-causes-for-the-failure-of-the-circuit-breaker-policy-to-take-effect" class="sidebar-link">Possible Causes For The Failure Of The Circuit Breaker Policy To Take Effect</a></li><li class="sidebar-sub-header"><a href="/versions/1.0.x/en/document/FAQ/flowcontrol.html#possible-reasons-why-the-quarantine-rule-does-not-take-effect" class="sidebar-link">Possible Reasons Why The Quarantine Rule Does Not Take Effect</a></li><li class="sidebar-sub-header"><a href="/versions/1.0.x/en/document/FAQ/flowcontrol.html#possible-causes-for-the-retry-rule-does-not-take-effect" class="sidebar-link">Possible Causes For The Retry Rule Does Not Take Effect</a></li><li class="sidebar-sub-header"><a href="/versions/1.0.x/en/document/FAQ/flowcontrol.html#possible-causes-of-the-httphostconnectexception-error-reported-during-startup" class="sidebar-link">Possible Causes Of The HttpHostConnectException Error Reported During Startup</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="flow-control-faqs"><a href="#flow-control-faqs" class="header-anchor">#</a> Flow Control FAQs</h1> <p>This document describes the common problems encountered when the flow control plugin is used.</p> <h2 id="how-is-the-apipath-defined-in-the-service-scenario"><a href="#how-is-the-apipath-defined-in-the-service-scenario" class="header-anchor">#</a> How Is The APIPath Defined In The Service Scenario?</h2> <ul><li><code>apiPath</code> indicates the interface to be used. The definition varies according to the framework. Currently, HTTP and Dubbo requests are supported:
<ul><li><code>http procotol</code>： Indicates the request path. For example, if the interface http://localhost:8080/test exists, the apiPath of the interface is <code>/test</code>.</li> <li><code>dubbo procotol</code>：Request interface: <code>interface:version. Method</code>. If there is no interface version or the version is 0.0.0, the value of apiPath is Request <code>interface.Method</code>.</li></ul></li></ul> <h2 id="how-do-i-determine-whether-a-configuration-rule-takes-effect"><a href="#how-do-i-determine-whether-a-configuration-rule-takes-effect" class="header-anchor">#</a> How Do I Determine Whether a Configuration Rule Takes Effect?</h2> <ul><li>Configure service scenarios and governance policies correctly in the configuration center. After the configuration, you can view the agent logs. Generally, in the logs folder in the startup path of the JAR package, view the sermant-x.log file and search for <code>has been</code> or the configured key name. If the found logs match the current time, the rule has taken effect.</li></ul> <h2 id="possible-causes-for-the-failure-of-the-circuit-breaker-policy-to-take-effect"><a href="#possible-causes-for-the-failure-of-the-circuit-breaker-policy-to-take-effect" class="header-anchor">#</a> Possible Causes For The Failure Of The Circuit Breaker Policy To Take Effect</h2> <ul><li>A circuit breaker takes effect only after the following conditions are met:
<ul><li><code>Error Rate</code>：The percentage of error interface requests. If the percentage of error interface requests within a specified period is greater than the configured value, the circuit breaker is triggered.</li> <li><code>Slow Invoking Ratio</code>：The percentage of slow invoking requests. When setting the circuit breaker policy, you need to set the slow invoking threshold. For example, if the time required for invoking the interface exceeds 100 ms and exceeds the configured slow invoking ratio, the circuit breaker can be triggered only when the time required for invoking the interface exceeds 100 ms.</li></ul></li> <li>Therefore, for the preceding two indicators, check whether the application interface meets either of the preceding conditions and whether the number of invoking requests within the rule period exceeds the minimum number specified by minimumNumberOfCalls.</li></ul> <h2 id="possible-reasons-why-the-quarantine-rule-does-not-take-effect"><a href="#possible-reasons-why-the-quarantine-rule-does-not-take-effect" class="header-anchor">#</a> Possible Reasons Why The Quarantine Rule Does Not Take Effect</h2> <ul><li>The quarantine rules must meet the following conditions:
<ul><li><code>The number of concurrent calls meets the requirement</code> (configured by maxConcurrentCalls). For example, if the threshold is set to 2, ensure that the number of concurrent calls is greater than 2.</li> <li><code>Maximum waiting time</code> (configured by maxWaitDuration), that is, the maximum waiting time of a thread when the number of concurrent connections reaches the maximum. If no permission is obtained after the maximum waiting time expires, the thread is triggered.</li></ul></li> <li>Therefore, you are advised to ensure that the service interface duration is greater than the maximum waiting time and the number of concurrent requests is greater than the configured value.</li></ul> <h2 id="possible-causes-for-the-retry-rule-does-not-take-effect"><a href="#possible-causes-for-the-retry-rule-does-not-take-effect" class="header-anchor">#</a> Possible Causes For The Retry Rule Does Not Take Effect</h2> <ul><li>Ensure that exceptions or status codes thrown by downstream applications meet the retry policy requirements. For example, by default, dubbo checks whether the downstream applications throw RpcException, and a specified status code can be configured for Spring applications.</li></ul> <h2 id="possible-causes-of-the-httphostconnectexception-error-reported-during-startup"><a href="#possible-causes-of-the-httphostconnectexception-error-reported-during-startup" class="header-anchor">#</a> Possible Causes Of The HttpHostConnectException Error Reported During Startup</h2> <ul><li>The cause is that the Sermant background service sermant-backhend is not started. Find the startup class com.huawei.apm.backend.NettyServerApplication to start the background service and restart the application.</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/22/2023, 7:09:43 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/versions/1.0.x/en/document/FAQ/registry.html" class="prev">
        Service Registration FAQs
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/versions/1.0.x/assets/js/app.d89a10e1.js" defer></script><script src="/versions/1.0.x/assets/js/3.edc8aac8.js" defer></script><script src="/versions/1.0.x/assets/js/1.9e8b067b.js" defer></script><script src="/versions/1.0.x/assets/js/20.70491544.js" defer></script>
  </body>
</html>
