(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{511:function(v,_,e){"use strict";e.r(_);var o=e(26),s=Object(o.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"第三方版权说明"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#第三方版权说明"}},[v._v("#")]),v._v(" 第三方版权说明")]),v._v(" "),_("p",[v._v("本文档针对开发过程中涉及的"),_("strong",[v._v("第三方")]),v._v("源码或二进制包的版权作相关说明。")]),v._v(" "),_("blockquote",[_("p",[_("strong",[v._v("说明：")]),v._v("\nSermant目前使用协议为"),_("a",{attrs:{href:"http://www.apache.org/licenses/LICENSE-2.0.html",target:"_blank",rel:"noopener noreferrer"}},[v._v("Apache-2.0 License"),_("OutboundLink")],1),v._v("，该License有如下几点要求：")]),v._v(" "),_("ol",[_("li",[v._v("需要给代码的用户一份Apache Licence。")]),v._v(" "),_("li",[v._v("如果你修改了代码，需要在被修改的文件中说明。")]),v._v(" "),_("li",[v._v("在延伸的代码中（修改和有源代码衍生的代码中）需要带有原来代码中的协议，商标，专利声明和其他原来作者规定需要包含的说明。")]),v._v(" "),_("li",[v._v("在发布的产品中包含一个Notice文件，则在Notice文件中需要带有Apache Licence。你可以在Notice中增加自己的许可，但不可以表现为对Apache Licence构成更改。")])])]),v._v(" "),_("h2",{attrs:{id:"源码引用"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#源码引用"}},[v._v("#")]),v._v(" 源码引用")]),v._v(" "),_("p",[v._v("如果在代码中，存在以下情况，视为对"),_("strong",[v._v("第三方")]),v._v("源码的"),_("strong",[v._v("引用")]),v._v("：")]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("整体拷贝")]),v._v("：直接拷贝"),_("strong",[v._v("第三方")]),v._v("源码中的文件，在其基础上进行修改。")]),v._v(" "),_("li",[_("strong",[v._v("局部拷贝")]),v._v("：拷贝"),_("strong",[v._v("第三方")]),v._v("源码中部分方法或内部类，将其用于自研代码中。")]),v._v(" "),_("li",[_("strong",[v._v("设计参考")]),v._v("：开发者在进行架构设计时，若参考"),_("strong",[v._v("第三方")]),v._v("的架构，且两种架构中存在定位相同的内容，也视为 "),_("strong",[v._v("引用")]),v._v("。")])]),v._v(" "),_("p",[v._v("以上三种情况中，需要开发者对涉及的文件做如下操作：")]),v._v(" "),_("ul",[_("li",[v._v("在"),_("code",[v._v("LICENSE")]),v._v("文件中添加对"),_("strong",[v._v("第三方")]),v._v("源码的拷贝说明，形如："),_("div",{staticClass:"language-txt extra-class"},[_("pre",{pre:!0,attrs:{class:"language-txt"}},[_("code",[v._v("The following files contain a portion of ${THIRD PARTY PROJECT NAME} project.\n\n${RELATED FILE A} in this product is copied from ${THIRD PARTY FILE A} of ${THIRD PARTY PROJECT NAME} project.\n\n${RELATED FILE B} in this product is copied from ${THIRD PARTY FILE B} of ${THIRD PARTY PROJECT NAME} project.\n\n...\n\n${THIRD PARTY PROJECT NAME} project is published at ${THIRD PARTY PROJECT CODEBASES URL} and its license is ${THIRD PARTY PROJECT LICENSE NAME}.\n")])])]),v._v("其中：\n"),_("ul",[_("li",[_("code",[v._v("THIRD PARTY PROJECT NAME")]),v._v("表示"),_("strong",[v._v("第三方")]),v._v("工程的名称。")]),v._v(" "),_("li",[_("code",[v._v("RELATED FILE")]),v._v("为本项目的"),_("strong",[v._v("涉事文件")]),v._v("：为类时，键入全限定名路径；否则，键入项目相对路径。")]),v._v(" "),_("li",[_("code",[v._v("THIRD PARTY FILE")]),v._v("表示"),_("strong",[v._v("第三方")]),v._v("的"),_("strong",[v._v("被拷贝文件")]),v._v("：为类时，键入全限定名路径；否则，键入项目相对路径；如果"),_("strong",[v._v("第三方")]),v._v("项目是单模块项目，也可键入source目录相对路径。")]),v._v(" "),_("li",[_("code",[v._v("THIRD PARTY PROJECT CODEBASES URL")]),v._v("表示"),_("strong",[v._v("第三方")]),v._v("工程源码仓的地址；如果找不到源码仓地址，可以改为官方网站地址或源码下载地址，总之原则就是要做到可溯源。")]),v._v(" "),_("li",[_("code",[v._v("THIRD PARTY PROJECT LICENSE NAME")]),v._v("表示"),_("strong",[v._v("第三方")]),v._v("工程的"),_("code",[v._v("LICENSE")]),v._v("名称，通常可以参考其"),_("code",[v._v("pom")]),v._v("文件中的"),_("code",[v._v("licenses")]),v._v("标签，如果存在多个"),_("code",[v._v("LICENSE")]),v._v("，则改为复数形式："),_("div",{staticClass:"language-txt extra-class"},[_("pre",{pre:!0,attrs:{class:"language-txt"}},[_("code",[v._v("...\nand its licenses are ${LICENSE A}, ${LICENSE B}, ..., and ${LICENSE C}.\n")])])])]),v._v(" "),_("li",[v._v("如果已经存在目标"),_("strong",[v._v("第三方")]),v._v("工程的条目，则掐头去尾将中间的拷贝信息填入即可。")])])]),v._v(" "),_("li",[v._v("在"),_("strong",[v._v("涉事文件")]),v._v("中键入"),_("strong",[v._v("被拷贝文件")]),v._v("的头信息(如果有)，并添加拷贝源信息，形如："),_("div",{staticClass:"language-txt extra-class"},[_("pre",{pre:!0,attrs:{class:"language-txt"}},[_("code",[v._v("Based on ${THIRD PARTY FILE} from the ${THIRD PARTY PROJECT NAME} project.\n")])])])]),v._v(" "),_("li",[v._v("如果"),_("strong",[v._v("第三方")]),v._v("工程中含有"),_("code",[v._v("NOTICE")]),v._v("文件，则将其追加到本工程的"),_("code",[v._v("NOTICE")]),v._v("文件结尾。如果已经包含，无需重复追加多次。")])]),v._v(" "),_("h2",{attrs:{id:"带依赖jar包"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#带依赖jar包"}},[v._v("#")]),v._v(" 带依赖jar包")]),v._v(" "),_("p",[v._v("如果开发者：")]),v._v(" "),_("ul",[_("li",[v._v("没有修改"),_("code",[v._v("resources")]),v._v("标签的内容")]),v._v(" "),_("li",[v._v("开发的模块中"),_("code",[v._v("sermant.basedir")]),v._v("参数正确指向顶层目录")]),v._v(" "),_("li",[v._v("不打带依赖"),_("code",[v._v("jar")]),v._v("包，或使用"),_("code",[v._v("shade")]),v._v("插件打带依赖"),_("code",[v._v("jar")]),v._v("包，且没有修改"),_("code",[v._v("transformers")]),v._v("标签")])]),v._v(" "),_("p",[v._v("那么无需对输出的"),_("code",[v._v("jar")]),v._v("包作任何调整，否则请详细阅读下面的说明，并按实际情况处理。")]),v._v(" "),_("p",[v._v("在默认打包过程中，需要将本工程默认的"),_("code",[v._v("LICENSE")]),v._v("文件和"),_("code",[v._v("NOTICE")]),v._v("文件打入。这两个文件存放于"),_("code",[v._v("sermant-package")]),v._v("模块的"),_("code",[v._v("resources/META-INF")]),v._v("目录下，由"),_("code",[v._v("resources")]),v._v("标签特别地指向。")]),v._v(" "),_("p",[v._v("一般情况下，只要保证打包的模块("),_("code",[v._v("packaging")]),v._v("标签的值不为"),_("code",[v._v("pom")]),v._v(")中"),_("code",[v._v("sermant.basedir")]),v._v("参数指向本工程的顶层目录，就会默认添加这两个文件，无需特别关心。")]),v._v(" "),_("p",[v._v("在打包流程中，使用"),_("code",[v._v("shade")]),v._v("插件、"),_("code",[v._v("assembly")]),v._v("插件或"),_("code",[v._v("spring")]),v._v("打包插件打带依赖"),_("code",[v._v("jar")]),v._v("包时，如果打入的"),_("strong",[v._v("第三方")]),_("code",[v._v("jar")]),v._v("包中含有"),_("code",[v._v("NOTICE")]),v._v("文件，最好将他们与本工程默认的"),_("code",[v._v("NOTICE")]),v._v("文件合并。"),_("code",[v._v("shade")]),v._v("插件的"),_("code",[v._v("ApacheNoticeResourceTransformer")]),v._v("正好可以做到这一点。这一点在顶层工程的"),_("code",[v._v("pom")]),v._v("文件中有配置，除非有修改"),_("code",[v._v("Transformer")]),v._v("的需要，否则不建议覆盖顶层工程的"),_("code",[v._v("shade")]),v._v("插件设置。")]),v._v(" "),_("p",[v._v("注意：本节所提到的默认的"),_("code",[v._v("LICENSE")]),v._v("文件和"),_("code",[v._v("NOTICE")]),v._v("文件，指的是仅包含本工程相关信息的文件。在项目顶层目录中存放的"),_("code",[v._v("LICENSE")]),v._v("文件和"),_("code",[v._v("NOTICE")]),v._v("文件，系整理过源码拷贝信息后的文件，包含本工程相关信息和被拷贝的"),_("strong",[v._v("第三方")]),v._v("工程信息。")]),v._v(" "),_("h2",{attrs:{id:"release产品包"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#release产品包"}},[v._v("#")]),v._v(" RELEASE产品包")]),v._v(" "),_("p",[_("code",[v._v("RELEASE")]),v._v("产品包中需要将工程源码的"),_("code",[v._v("LICENSE")]),v._v("文件和"),_("code",[v._v("NOTICE")]),v._v("文件带上，前者还需要添加"),_("code",[v._v("RELEASE")]),v._v("产品包中所有涉及的"),_("strong",[v._v("第三方")]),_("code",[v._v("jar")]),v._v("包的"),_("code",[v._v("LICENSE")]),v._v("信息。"),_("code",[v._v("RELEASE")]),v._v("产品包还需要将与本工程"),_("code",[v._v("LICENSE")]),v._v("不同的"),_("strong",[v._v("第三方")]),_("code",[v._v("LICENSE")]),v._v("存放于"),_("code",[v._v("licenses")]),v._v("目录中带上，该目录存放于"),_("code",[v._v("sermant-package")]),v._v("模块的"),_("code",[v._v("resources")]),v._v("目录中。")]),v._v(" "),_("p",[v._v("综上，"),_("code",[v._v("RELEASE")]),v._v("产品包内部结构形如：")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("agent")]),v._v("目录: 核心增强逻辑")]),v._v(" "),_("li",[_("code",[v._v("server")]),v._v("目录: 增强逻辑配套的服务端")]),v._v(" "),_("li",[_("code",[v._v("licenses")]),v._v("目录: 与本工程"),_("code",[v._v("LICENSE")]),v._v("不同的"),_("strong",[v._v("第三方开源依赖项目")]),_("code",[v._v("LICENSE")]),v._v("存放目录")]),v._v(" "),_("li",[_("code",[v._v("LICENSE")]),v._v("文件: 本工程"),_("code",[v._v("LICENSE")]),v._v("文件，附加拷贝"),_("strong",[v._v("第三方开源")]),v._v("源码的LICENSE声明，以及"),_("code",[v._v("RELEASE")]),v._v("产品包中涉及的所有"),_("strong",[v._v("第三方开源依赖项目")]),_("code",[v._v("jar")]),v._v("包的"),_("code",[v._v("LICENSE")]),v._v("说明")]),v._v(" "),_("li",[_("code",[v._v("NOTICE")]),v._v("文件: 本工程"),_("code",[v._v("NOTICE")]),v._v("文件，追加拷贝"),_("strong",[v._v("第三方开源")]),v._v("源码的"),_("code",[v._v("NOTICE")]),v._v("文件。")])]),v._v(" "),_("p",[v._v("本工程通过以下方式生成"),_("code",[v._v("RELEASE")]),v._v("产品包的"),_("code",[v._v("LICENSE")]),v._v("文件、"),_("code",[v._v("NOTICE")]),v._v("文件和"),_("code",[v._v("licenses")]),v._v("目录：")]),v._v(" "),_("ul",[_("li",[v._v("通过"),_("code",[v._v("license-maven-plugin")]),v._v("插件生成项目中所有涉及的第三方"),_("code",[v._v("jar")]),v._v("包的"),_("code",[v._v("LICENSE")]),v._v("信息："),_("div",{staticClass:"language-shell extra-class"},[_("pre",{pre:!0,attrs:{class:"language-shell"}},[_("code",[v._v("mvn license:aggregate-add-third-party\n")])])]),v._v("生成的文件"),_("code",[v._v("LICENSE-binary-suffix.txt")]),v._v("存放于"),_("code",[v._v("sermant-package")]),v._v("模块的"),_("code",[v._v("resources")]),v._v("目录。该过程初次执行时间较久，请耐心等待。")]),v._v(" "),_("li",[v._v("工程各组件打包，输出到临时目录下。")]),v._v(" "),_("li",[v._v("在"),_("code",[v._v("sermant-package")]),v._v("模块打包时：\n"),_("ul",[_("li",[v._v("将工程源码的"),_("code",[v._v("LICENSE")]),v._v("文件、"),_("code",[v._v("NOTICE")]),v._v("文件和"),_("code",[v._v("licenses")]),v._v("目录拷贝到临时目录中。")]),v._v(" "),_("li",[v._v("调用脚本将"),_("code",[v._v("LICENSE-binary-suffix.txt")]),v._v("文件追加到临时目录的"),_("code",[v._v("LICENSE")]),v._v("文件。")]),v._v(" "),_("li",[v._v("将临时目录压缩为"),_("code",[v._v("RELEASE")]),v._v("产品包。")])])])]),v._v(" "),_("p",[v._v("综上，开发者可以通过以下命令编译并发布"),_("code",[v._v("RELEASE")]),v._v("产品包：")]),v._v(" "),_("div",{staticClass:"language-shell extra-class"},[_("pre",{pre:!0,attrs:{class:"language-shell"}},[_("code",[v._v("mvn license:aggregate-add-third-party clean package "),_("span",{pre:!0,attrs:{class:"token parameter variable"}},[v._v("-Dmaven.test.skip")]),v._v("\n")])])])])}),[],!1,null,null,null);_.default=s.exports}}]);